<!DOCTYPE html>
<html>
    <head>
        <script src="{{url_for('static', filename='dist/admin.js')}}">
        </script>
        <script>
            quickSummary("{{host}}:5000");
        </script>
        <link rel="stylesheet" href="{{url_for('static', filename='styles/admin.css')}}">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head> 
    <body> 
        <header> 
            <h1>Onefile</h1>
            <nav class="nav-container">
                <button id="home-button" class="nav-button">Home</button>
                <button id="files-button" class="nav-button">Files</button>
                <button id="users-button" class="nav-button">Users</button>
                <button id="stats-button" class="nav-button">Stats</button>
                <a href="http://{{host}}:5000/">
                    <button id="logout-button" class="nav-button" style="float: right">Logout</button>
                </a>
                <button id="settings-button" class="nav-button" 
                    style="float: right">Settings</button>
            </nav>
        </header>
        <div class="page" id="home-page" style="display: block;">
            <h2>Quick Summary</h2>
            <div class="container">
                <div class="stat" style="grid-area: 1 / 1 / 3 / 3">
                    <p>File downloads </p>
                    <canvas id="chart1"></canvas>
                </div>
                <div class="stat" style="grid-area: 1 / 3 / 3 / 4"> <p>Page views</p> <table id="pageviews-sum"></table> </div>
                <div class="stat" style="grid-area: 1 / 4 / 3 / 5"> <p>Users</p>
                    <table id="users-sum"></table>
                </div>
                <div class="stat" style="grid-area: 3 / 1 / 5 / 3">
                    <p>Most recent views</p>
                    <table id="views-sum"></table>
                </div>
                <div class="stat" style="grid-area: 3 / 3 / 5 / 4">
                    <p>Create user</p>
                    <form id="create-user-form" action="">
                        <div>
                            <input type="text" id="uname" name="new-username" 
                            placeholder="Username" required>
                        </div>
                        <div>
                            <input type="text" id="passwd" name="new-password" 
                            placeholder="Password" required>
                        </div>
                        <div>
                            <select name="new-privilege" required>
                                <option value=1>Admin</option>
                                <option value=2>Uploader</option>
                                <option value=3>User</option>
                            </select>
                        </div>
                        <div>
                            <input type="submit" value="Submit">
                        </div>
                    </form>
                </div>
                <div class="stat" style="grid-area: 3 / 4 / 5 / 7">
                    <p>Delete User</p>
                    <form id="delete-user-form">
                        <div>
                            <input type="text" name="username" placeholder="Username" 
                            required>
                        </div>
                        <div>
                            <input type="submit" value="Submit">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="page" id="file-page">
            <h2>Files</h2>
            <h3>Upload a file</h3>
            <div class="upload-file-form">
                <form id="upload-file-form-id">
                    <div>
                        <input type="text" name="filename" placeholder="filename" required>
                    </div>
                    <div>
                        <input type="file" id="file-upload-input" required>
                    </div> 
                    <div>
                        <input type="submit" value="Submit">
                    </div>
                </form>
            </div>
            <table id="file-table-id" class="file-table">
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Download Count</th>
                    <th>Upload Date</th>
                </tr>
            </table>
        </div>
        <div class="page" id="users-page">
            <h2>Users</h2>
            <table id="users-table-id" class="file-table">
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Privilege</th>
                </tr>
            </table>
        </div>
        <div class="page" id="stats-page">
            <h2>Statistics</h2>
            <h3>Page views</h3>
            <div class="table-container">
                <table id="view-table-id" class="file-table">
                    <tr>
                        <th>ID</th>
                        <th>User</th>
                        <th>IP address</th>
                        <th>Page</th>
                        <th>Timestamp</th>
                    </tr>
                </table>
            </div>
            <h3>File downloads</h3>
            <div class="table-container">
            <table id="download-history-table-id" class="file-table dlhistory" >
                <tr>
                    <th>File</th>
                    <th>User</th>
                    <th>Timestamp</th>
                </tr>
            </table>
            </div>
        </div>
        <div class="page" id="settings-page">
            <p>Settings page is a work in progress!</p> 
        </div>
        <div class="response-bubble" id="response-bubble">
            <p> Response Bubble!</p>
        </div>
        <script>
            initform("{{host}}:5000");
        </script>
    </body>
</html>
